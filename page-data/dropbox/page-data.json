{"componentChunkName":"component---src-templates-org-posts-js","path":"/dropbox","result":{"data":{"orgContent":{"html":"<p>Sometimes dropbox fails to run. removing the <code class=\"\">~/.dropbox-dist/</code> directory may help alot. This will remove the client daemon of dropbox. In next time when we call `dropbox start` it will download the client again: </p><pre><code class=\"hljs language-undefined\">rm -rf ~/.dropbox-dist\ndropbox start // wait to download\ndropbox stop  // stop the dropbox client\nsystemctl --user restart mydropbox.service\nsystemctl --user status mydropbox.service</code></pre><p>I installed dropbox with this flatpak: </p><pre><code class=\"hljs language-undefined\">flatpak -y install flathub com.dropbox.Client</code></pre><p>And then here is my nixos config for dropbox: </p><pre><code class=\"hljs language-undefined\">systemd.user.services.dropboxflat = {\n  serviceConfig = {\n    ExecStart = \"${pkgs.flatpak}/bin/flatpak run com.dropbox.Client\";\n  };\n  wantedBy = [ \"default.target\" ];\n};</code></pre><pre><code class=\"hljs language-undefined\">systemd.user.services.mydropbox = {\n  serviceConfig = {\n    ExecStart = \"${pkgs.dropbox}/bin/dropbox start\";\n  };\n  wantedBy = [ \"default.target\" ];\n};\n\n\nnetworking.firewall = {\n   allowedTCPPorts = [ 17500 ];\n   allowedUDPPorts = [ 17500 ];\n };\n\n systemd.user.services.mynewdropbox = {\n   description = \"Dropbox\";\n   enable = true;\n   after = [ \"xembedsniproxy.service\" ];\n   wants = [ \"xembedsniproxy.service\" ];\n   wantedBy = [ \"graphical-session.target\" ];\n   environment = {\n     QT_PLUGIN_PATH = \"/run/current-system/sw/\" + pkgs.qt5.qtbase.qtPluginPrefix;\n     QML2_IMPORT_PATH = \"/run/current-system/sw/\" + pkgs.qt5.qtbase.qtQmlPrefix;\n   };\n   serviceConfig = {\n     ExecStart = \"${pkgs.dropbox.out}/bin/dropbox start\";\n     ExecReload = \"${pkgs.coreutils.out}/bin/kill -HUP $MAINPID\";\n     KillMode = \"control-group\"; # upstream recommends process\n     Restart = \"on-failure\";\n     PrivateTmp = true;\n     ProtectSystem = \"full\";\n     Nice = 10;\n   };\n };</code></pre><p>Some other news </p>","metadata":{"title":"Dropbox","slug":"dropbox"}},"site":{"siteMetadata":{"title":"Milad Khajavi's Notes"}}},"pageContext":{"slug":"dropbox","title":"Dropbox"}},"staticQueryHashes":[]}